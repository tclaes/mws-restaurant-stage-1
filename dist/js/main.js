let restaurants,neighborhoods,cuisines;var markers=[];document.addEventListener('DOMContentLoaded',()=>{fetchNeighborhoods(),fetchCuisines()}),lazyLoad=()=>new LazyLoad,fetchNeighborhoods=()=>{DBHelper.fetchNeighborhoods((a,b)=>{a?console.error(a):(self.neighborhoods=b,fillNeighborhoodsHTML())})},fillNeighborhoodsHTML=(a=self.neighborhoods)=>{const b=document.getElementById('neighborhoods-select');a.forEach((a)=>{const c=document.createElement('option');c.innerHTML=a,c.value=a,b.append(c)})},fetchCuisines=()=>{DBHelper.fetchCuisines((a,b)=>{a?console.error(a):(self.cuisines=b,fillCuisinesHTML())})},fillCuisinesHTML=(a=self.cuisines)=>{const b=document.getElementById('cuisines-select');a.forEach((a)=>{const c=document.createElement('option');c.innerHTML=a,c.value=a,b.append(c)})},window.initMap=()=>{self.map=new google.maps.Map(document.getElementById('map'),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),self.map.addListener('tilesloaded',setMapTitle),updateRestaurants()},setMapTitle=()=>{const a=document.querySelector('#map').querySelector('iframe');a.setAttribute('title','Google maps with restaurant location')},updateRestaurants=()=>{const a=document.getElementById('cuisines-select'),b=document.getElementById('neighborhoods-select'),c=a.selectedIndex,d=b.selectedIndex,e=a[c].value,f=b[d].value;DBHelper.fetchRestaurantByCuisineAndNeighborhood(e,f,(a,b)=>{a?console.error(a):(resetRestaurants(b),fillRestaurantsHTML())})},resetRestaurants=(a)=>{self.restaurants=[];const b=document.getElementById('restaurants-list');b.innerHTML='',self.markers.forEach((a)=>a.setMap(null)),self.markers=[],self.restaurants=a},fillRestaurantsHTML=(a=self.restaurants)=>{const b=document.getElementById('restaurants-list');a.forEach((a)=>{b.append(createRestaurantHTML(a))}),addMarkersToMap()},createRestaurantHTML=(a)=>{const b=document.createElement('li'),c=document.createElement('picture'),d=document.createElement('source');d.className='restaurant-img lazy',d.setAttribute('data-srcset',DBHelper.imageUrlForRestaurant(a)+'_small.webp'),d.setAttribute('media','(min-width: 400px)'),c.append(d);const e=document.createElement('source');e.className='restaurant-img lazy',e.setAttribute('data-srcset',DBHelper.imageUrlForRestaurant(a)+'_large.webp'),e.setAttribute('media','(min-width: 900px)'),c.append(e);const f=document.createElement('img');f.className='restaurant-img lazy',f.setAttribute('data-src',DBHelper.imageUrlForRestaurant(a)+'_small.jpg'),f.alt='An image of restaurant '+a.name+' in '+a.neighborhood,c.append(f),b.append(c);const g=document.createElement('h2');g.innerHTML=a.name,b.append(g);const h=document.createElement('p');h.innerHTML=a.neighborhood,b.append(h);const i=document.createElement('p');i.innerHTML=a.address,b.append(i);const j=document.createElement('a');return j.innerHTML='View Details',j.href=DBHelper.urlForRestaurant(a),b.append(j),b.onload=lazyLoad(),b},addMarkersToMap=(a=self.restaurants)=>{a.forEach((a)=>{const b=DBHelper.mapMarkerForRestaurant(a,self.map);google.maps.event.addListener(b,'click',()=>{window.location.href=b.url}),self.markers.push(b)})};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJmZXRjaEN1aXNpbmVzIiwiY29uc29sZSIsImVycm9yIiwic2VsZiIsIm5laWdoYm9yaG9vZHMiLCJmaWxsTmVpZ2hib3Job29kc0hUTUwiLCJkb2N1bWVudCIsImZvckVhY2giLCJuZWlnaGJvcmhvb2QiLCJvcHRpb24iLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwidmFsdWUiLCJzZWxlY3QiLCJhcHBlbmQiLCJEQkhlbHBlciIsImN1aXNpbmVzIiwiZmlsbEN1aXNpbmVzSFRNTCIsImdldEVsZW1lbnRCeUlkIiwiY3Vpc2luZSIsIndpbmRvdyIsImluaXRNYXAiLCJsb2MiLCJtYXAiLCJnb29nbGUiLCJtYXBzIiwiTWFwIiwiem9vbSIsImNlbnRlciIsInNjcm9sbHdoZWVsIiwibGF0IiwibG5nIiwiYWRkTGlzdGVuZXIiLCJzZXRNYXBUaXRsZSIsInVwZGF0ZVJlc3RhdXJhbnRzIiwibWFwRnJhbWUiLCJxdWVyeVNlbGVjdG9yIiwic2V0QXR0cmlidXRlIiwiY1NlbGVjdCIsIm5TZWxlY3QiLCJjSW5kZXgiLCJzZWxlY3RlZEluZGV4IiwibkluZGV4IiwiZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwicmVzZXRSZXN0YXVyYW50cyIsImZpbGxSZXN0YXVyYW50c0hUTUwiLCJtYXJrZXJzIiwicmVzdGF1cmFudCIsInVsIiwiYWRkTWFya2Vyc1RvTWFwIiwiY3JlYXRlUmVzdGF1cmFudEhUTUwiLCJzb3VyY2VTbWFsbCIsImNsYXNzTmFtZSIsInNvdXJjZUxhcmdlIiwiaW1hZ2UiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJhbHQiLCJuYW1lIiwiYWRkcmVzcyIsIm1vcmUiLCJtYXJrZXIiLCJtYXBNYXJrZXJGb3JSZXN0YXVyYW50Il0sIm1hcHBpbmdzIjoiQUFBQSxHQUFBLEFBQUlBLGFBQUosQUFHQSxjQUhBLEFBRUUsU0FHRixHQUFBLFNBQUEsR0FL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QyxjQUF4QixBQUF3QkEsUUFBdUJkLElBQUFBLEFBQy9DdkIsUUFBQUEsQUFBT0MsU0FBUEQsQUFBa0JRLEtBQUFBLEVBQWxCUixBQUE4Qm9DLEFBQzVCeEMsR0FGRixBQUdDLFFBQUEsQUFGRCxRQUVDLEFBRkQsQUFHQWpCLE9BUEo4QyxBQVFHLEVBUkgiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50cyxcclxuICBuZWlnaGJvcmhvb2RzLFxyXG4gIGN1aXNpbmVzO1xyXG52YXIgbWFya2VycyA9IFtdO1xyXG5cclxuLyoqXHJcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxyXG4gKi9cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcclxuICBmZXRjaE5laWdoYm9yaG9vZHMoKTtcclxuICBmZXRjaEN1aXNpbmVzKCk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIExhenlMb2FkaW5nIGltYWdlcyBvbiBpbml0XHJcbiAqL1xyXG5cclxubGF6eUxvYWQgPSAoKSA9PiBuZXcgTGF6eUxvYWQgKCk7XHJcblxyXG4vKipcclxuICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hOZWlnaGJvcmhvb2RzID0gKCkgPT4ge1xyXG4gIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygoZXJyb3IsIG5laWdoYm9yaG9vZHMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3JcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzZWxmLm5laWdoYm9yaG9vZHMgPSBuZWlnaGJvcmhvb2RzO1xyXG4gICAgICBmaWxsTmVpZ2hib3Job29kc0hUTUwoKTtcclxuICAgIH1cclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBTZXQgbmVpZ2hib3Job29kcyBIVE1MLlxyXG4gKi9cclxuZmlsbE5laWdoYm9yaG9vZHNIVE1MID0gKG5laWdoYm9yaG9vZHMgPSBzZWxmLm5laWdoYm9yaG9vZHMpID0+IHtcclxuICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuICBuZWlnaGJvcmhvb2RzLmZvckVhY2gobmVpZ2hib3Job29kID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IG5laWdoYm9yaG9vZDtcclxuICAgIG9wdGlvbi52YWx1ZSA9IG5laWdoYm9yaG9vZDtcclxuICAgIHNlbGVjdC5hcHBlbmQob3B0aW9uKTtcclxuICB9KTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxyXG4gKi9cclxuZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcclxuICBEQkhlbHBlci5mZXRjaEN1aXNpbmVzKChlcnJvciwgY3Vpc2luZXMpID0+IHtcclxuICAgIGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzO1xyXG4gICAgICBmaWxsQ3Vpc2luZXNIVE1MKCk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcblxyXG4vKipcclxuICogU2V0IGN1aXNpbmVzIEhUTUwuXHJcbiAqL1xyXG5maWxsQ3Vpc2luZXNIVE1MID0gKGN1aXNpbmVzID0gc2VsZi5jdWlzaW5lcykgPT4ge1xyXG4gIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjdWlzaW5lcy1zZWxlY3QnKTtcclxuXHJcbiAgY3Vpc2luZXMuZm9yRWFjaChjdWlzaW5lID0+IHtcclxuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgb3B0aW9uLmlubmVySFRNTCA9IGN1aXNpbmU7XHJcbiAgICBvcHRpb24udmFsdWUgPSBjdWlzaW5lO1xyXG4gICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cclxuICovXHJcbndpbmRvdy5pbml0TWFwID0gKCkgPT4ge1xyXG4gIGxldCBsb2MgPSB7XHJcbiAgICBsYXQ6IDQwLjcyMjIxNixcclxuICAgIGxuZzogLTczLjk4NzUwMVxyXG4gIH07XHJcbiAgc2VsZi5tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xyXG4gICAgem9vbTogMTIsXHJcbiAgICBjZW50ZXI6IGxvYyxcclxuICAgIHNjcm9sbHdoZWVsOiBmYWxzZVxyXG4gIH0pO1xyXG4gIHNlbGYubWFwLmFkZExpc3RlbmVyKCd0aWxlc2xvYWRlZCcsIHNldE1hcFRpdGxlKTtcclxuICB1cGRhdGVSZXN0YXVyYW50cygpO1xyXG59O1xyXG5cclxuc2V0TWFwVGl0bGUgPSAoKSA9PiB7XHJcbiAgICBjb25zdCBtYXBGcmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYXAnKS5xdWVyeVNlbGVjdG9yKCdpZnJhbWUnKTtcclxuICAgIG1hcEZyYW1lLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnR29vZ2xlIG1hcHMgd2l0aCByZXN0YXVyYW50IGxvY2F0aW9uJyk7XHJcbn07XHJcblxyXG4vKipcclxuICogVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50cy5cclxuICovXHJcbnVwZGF0ZVJlc3RhdXJhbnRzID0gKCkgPT4ge1xyXG4gIGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XHJcbiAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xyXG5cclxuICBjb25zdCBjSW5kZXggPSBjU2VsZWN0LnNlbGVjdGVkSW5kZXg7XHJcbiAgY29uc3QgbkluZGV4ID0gblNlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG5cclxuICBjb25zdCBjdWlzaW5lID0gY1NlbGVjdFtjSW5kZXhdLnZhbHVlO1xyXG4gIGNvbnN0IG5laWdoYm9yaG9vZCA9IG5TZWxlY3RbbkluZGV4XS52YWx1ZTtcclxuXHJcbiAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZCwgKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xyXG4gICAgaWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvciFcclxuICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXNldFJlc3RhdXJhbnRzKHJlc3RhdXJhbnRzKTtcclxuICAgICAgZmlsbFJlc3RhdXJhbnRzSFRNTCgpO1xyXG4gICAgfVxyXG4gIH0pXHJcbn07XHJcblxyXG4vKipcclxuICogQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxyXG4gKi9cclxucmVzZXRSZXN0YXVyYW50cyA9IChyZXN0YXVyYW50cykgPT4ge1xyXG4gIC8vIFJlbW92ZSBhbGwgcmVzdGF1cmFudHNcclxuICBzZWxmLnJlc3RhdXJhbnRzID0gW107XHJcbiAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xyXG4gIHVsLmlubmVySFRNTCA9ICcnO1xyXG5cclxuICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXHJcbiAgc2VsZi5tYXJrZXJzLmZvckVhY2gobSA9PiBtLnNldE1hcChudWxsKSk7XHJcbiAgc2VsZi5tYXJrZXJzID0gW107XHJcbiAgc2VsZi5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXHJcbiAqL1xyXG5maWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuICByZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG4gICAgdWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcclxuICB9KTtcclxuICBhZGRNYXJrZXJzVG9NYXAoKTtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgcmVzdGF1cmFudCBIVE1MLlxyXG4gKi9cclxuY3JlYXRlUmVzdGF1cmFudEhUTUwgPSAocmVzdGF1cmFudCkgPT4ge1xyXG4gIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcclxuXHJcbiAgY29uc3QgcGljdHVyZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3BpY3R1cmUnKTtcclxuXHJcbiAgY29uc3Qgc291cmNlU21hbGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzb3VyY2UnKTtcclxuICBzb3VyY2VTbWFsbC5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcgbGF6eSc7XHJcbiAgc291cmNlU21hbGwuc2V0QXR0cmlidXRlKFwiZGF0YS1zcmNzZXRcIixEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkgKyBcIl9zbWFsbC53ZWJwXCIpO1xyXG4gIHNvdXJjZVNtYWxsLnNldEF0dHJpYnV0ZShcIm1lZGlhXCIsIFwiKG1pbi13aWR0aDogNDAwcHgpXCIpXHJcbiAgcGljdHVyZS5hcHBlbmQoc291cmNlU21hbGwpO1xyXG5cclxuICAgIGNvbnN0IHNvdXJjZUxhcmdlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc291cmNlJyk7XHJcbiAgICBzb3VyY2VMYXJnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcgbGF6eSc7XHJcbiAgICBzb3VyY2VMYXJnZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNyY3NldFwiLERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KSArIFwiX2xhcmdlLndlYnBcIik7XHJcbiAgICBzb3VyY2VMYXJnZS5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBcIihtaW4td2lkdGg6IDkwMHB4KVwiKVxyXG4gICAgcGljdHVyZS5hcHBlbmQoc291cmNlTGFyZ2UpO1xyXG5cclxuICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG4gIGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyBsYXp5JztcclxuICBpbWFnZS5zZXRBdHRyaWJ1dGUoXCJkYXRhLXNyY1wiLCBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkgKyBcIl9zbWFsbC5qcGdcIik7XHJcbiAgaW1hZ2UuYWx0ID0gXCJBbiBpbWFnZSBvZiByZXN0YXVyYW50IFwiICsgcmVzdGF1cmFudC5uYW1lICsgXCIgaW4gXCIgKyByZXN0YXVyYW50Lm5laWdoYm9yaG9vZDtcclxuICBwaWN0dXJlLmFwcGVuZChpbWFnZSk7XHJcblxyXG4gIGxpLmFwcGVuZChwaWN0dXJlKTtcclxuXHJcbiAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XHJcbiAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XHJcbiAgbGkuYXBwZW5kKG5hbWUpO1xyXG5cclxuICBjb25zdCBuZWlnaGJvcmhvb2QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgbmVpZ2hib3Job29kLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmVpZ2hib3Job29kO1xyXG4gIGxpLmFwcGVuZChuZWlnaGJvcmhvb2QpO1xyXG5cclxuICBjb25zdCBhZGRyZXNzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gIGFkZHJlc3MuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5hZGRyZXNzO1xyXG4gIGxpLmFwcGVuZChhZGRyZXNzKTtcclxuXHJcbiAgY29uc3QgbW9yZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICBtb3JlLmlubmVySFRNTCA9ICdWaWV3IERldGFpbHMnO1xyXG4gIG1vcmUuaHJlZiA9IERCSGVscGVyLnVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XHJcbiAgbGkuYXBwZW5kKG1vcmUpO1xyXG5cclxuICBsaS5vbmxvYWQgPSBsYXp5TG9hZCgpO1xyXG5cclxuICByZXR1cm4gbGlcclxufTtcclxuXHJcbi8qKlxyXG4gKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxyXG4gKi9cclxuYWRkTWFya2Vyc1RvTWFwID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG4gIHJlc3RhdXJhbnRzLmZvckVhY2gocmVzdGF1cmFudCA9PiB7XHJcbiAgICAvLyBBZGQgbWFya2VyIHRvIHRoZSBtYXBcclxuICAgIGNvbnN0IG1hcmtlciA9IERCSGVscGVyLm1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgc2VsZi5tYXApO1xyXG4gICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobWFya2VyLCAnY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbWFya2VyLnVybFxyXG4gICAgfSk7XHJcbiAgICBzZWxmLm1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gIH0pO1xyXG59O1xyXG4iXX0=
